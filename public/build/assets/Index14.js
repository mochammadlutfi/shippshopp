import{_ as L,A as U,j as d,k as c,l as a,p as l,$ as r,v as e,a2 as v,a3 as z,s as w,q as h,F as N,a0 as x,E as Y,B as F,x as I,y as A}from"./id.js";import{E as q}from"./index29.js";import{E as G}from"./index20.js";import{a as H,E as O}from"./index32.js";import{E as R,a as J}from"./index8.js";import{E as Q}from"./index21.js";import{E as W,a as X}from"./index31.js";import{E as Z}from"./index30.js";import{E as $}from"./index34.js";import{E as ee,a as ae}from"./index22.js";import{E as te}from"./index35.js";import{E as oe}from"./index26.js";import{v as se}from"./directive.js";import"./index27.js";import"./scroll.js";import"./index7.js";import"./typescript.js";import"./isEqual.js";import"./_Uint8Array.js";import"./event.js";import"./debounce.js";import"./index33.js";import"./index23.js";import"./_initCloneObject.js";import"./index25.js";const le={data(){return{data:[],isLoading:!0,params:{searchKey:"name",searchKeyword:"",sort:"id",sortDir:"DESC",limit:25,total:0,page:1,pageSize:0},showModal:!1,form:{status:null,periode:null}}},async created(){await this.fetchData()},methods:{async fetchData(o){var o=o??1;try{this.isLoading=!0;const i=await axios.get(this.route("admin.purchase.order.data"),{params:{page:o,limit:this.params.limit,search:this.params.searchKeyword,searchKey:this.params.searchKey}});i.status==200&&(this.data=i.data.data,this.params.page=i.data.current_page,this.params.total=i.data.total,this.params.pageSize=i.data.per_page,this.params.from=i.data.from,this.params.to=i.data.to),this.isLoading=!1}catch(i){console.error(i)}},format_date(n){if(n)return moment(String(n)).format("DD MMM YYYY")},hapus(n){q.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.purchase.order.delete",{id:n}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),G({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},ne={class:"content"},re={class:"content-heading d-flex justify-content-between align-items-center"},ie=l("span",null,"Pesanan Pembelian",-1),de={class:"space-x-1"},pe=["href"],me=l("i",{class:"fa fa-plus me-1"},null,-1),ce=l("i",{class:"fa fa-print me-1"},null,-1),ue={class:"block block-rounded bordered"},_e={class:"block-content py-3"},fe=l("i",{class:"fa fa-search"},null,-1),he={class:"block-content p-0"},ge=l("i",{class:"fa fa-angle-down ms-1"},null,-1),be=["href"],we=l("i",{class:"si fa-fw si-eye"},null,-1),ye=["href"],Ee=l("i",{class:"si fa-fw si-note"},null,-1),ke=l("i",{class:"si fa-fw si-trash"},null,-1),ve={key:0,class:"block-content py-2"},xe={class:"mb-0"},De={class:"d-flex"},Ce={class:"float-end"};function Se(n,o,i,Ve,s,g){const u=Y,p=H,y=O,_=R,D=Q,E=J,m=W,f=Z,b=F,C=I,S=A,V=X,M=$,k=ee,B=te,T=ae,P=oe,j=U("base-layout"),K=se;return d(),c(j,null,{default:a(()=>[l("div",ne,[l("div",re,[ie,l("div",de,[l("a",{href:n.route("admin.purchase.order.create"),class:"ep-button ep-button--primary"},[me,r(" Tambah ")],8,pe),e(u,{type:"primary",onClick:o[0]||(o[0]=v(t=>s.showModal=!0,["prevent"]))},{default:a(()=>[ce,r(" Export ")]),_:1})])]),z((d(),w("div",ue,[l("div",_e,[e(E,{justify:"space-between"},{default:a(()=>[e(_,{span:12},{default:a(()=>[e(y,{modelValue:s.params.limit,"onUpdate:modelValue":o[1]||(o[1]=t=>s.params.limit=t),placeholder:"Pilih",style:{width:"115px"},onChange:o[2]||(o[2]=t=>g.fetchData(1))},{default:a(()=>[e(p,{label:"25",value:"25"}),e(p,{label:"50",value:"50"}),e(p,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(_,{span:8},{default:a(()=>[e(D,{modelValue:s.params.searchKeyword,"onUpdate:modelValue":o[3]||(o[3]=t=>s.params.searchKeyword=t),placeholder:"Masukan kata kunci",class:"input-with-select",clearable:""},{prefix:a(()=>[fe]),_:1},8,["modelValue"])]),_:1})]),_:1})]),l("div",he,[e(V,{data:s.data,class:"w-100",onSortChange:n.sortChange,"header-cell-class-name":"bg-primary text-dark"},{default:a(()=>[e(m,{type:"index",index:n.indexMethod,width:"100"},null,8,["index"]),e(m,{prop:"nomor",label:"Nomor",sortable:""}),e(m,{prop:"supplier.nama",label:"Supplier",sortable:""}),e(m,{prop:"state",label:"Status",sortable:""},{default:a(t=>[t.row.state=="draft"?(d(),c(f,{key:0,type:"warning"},{default:a(()=>[r(" Draft ")]),_:1})):t.row.state=="pending"?(d(),c(f,{key:1,type:"info"},{default:a(()=>[r(" Pending ")]),_:1})):t.row.state=="done"?(d(),c(f,{key:2,type:"success"},{default:a(()=>[r(" Selesai ")]),_:1})):(d(),c(f,{key:3,type:"danger"},{default:a(()=>[r("Batal")]),_:1}))]),_:1}),e(m,{prop:"total",label:"Total",sortable:""},{default:a(t=>[r(h(n.currency(t.row.total)),1)]),_:1}),e(m,{label:"Aksi",align:"center",width:"180"},{default:a(t=>[e(S,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:a(()=>[e(C,null,{default:a(()=>[e(b,null,{default:a(()=>[l("a",{href:n.route("admin.purchase.order.show",{id:t.row.id}),class:"w-100 d-flex align-items-center justify-content-between space-x-1"},[r(" Detail "),we],8,be)]),_:2},1024),n.$page.props.user.level!="admin"?(d(),w(N,{key:0},[e(b,null,{default:a(()=>[l("a",{href:n.route("admin.purchase.order.edit",{id:t.row.id}),class:"w-100 d-flex align-items-center justify-content-between space-x-1"},[r(" Ubah "),Ee],8,ye)]),_:2},1024),e(b,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:v(Me=>g.hapus(t.row.id),["prevent"])},{default:a(()=>[r(" Hapus "),ke]),_:2},1032,["onClick"])],64)):x("",!0)]),_:2},1024)]),default:a(()=>[e(u,{type:"primary"},{default:a(()=>[r(" Aksi "),ge]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])]),s.isLoading==!1?(d(),w("div",ve,[e(E,{justify:"space-between"},{default:a(()=>[e(_,{lg:12},{default:a(()=>[l("p",xe,"Menampilkan "+h(s.params.from)+" sampai "+h(s.params.to)+" dari "+h(s.params.total),1)]),_:1}),e(_,{lg:12,class:"text-end"},{default:a(()=>[e(M,{class:"float-end",background:"",layout:"prev, pager, next","page-size":s.params.pageSize,total:s.params.total,"current-page":s.params.page,onCurrentChange:g.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])):x("",!0)])),[[K,s.isLoading]])]),e(P,{modelValue:s.showModal,"onUpdate:modelValue":o[7]||(o[7]=t=>s.showModal=t),title:"Export",width:"500","before-close":n.handleClose},{default:a(()=>[e(T,{"label-width":"30%",method:"GET",action:n.route("admin.purchase.order.report"),target:"_blank","label-position":"top"},{default:a(()=>[e(k,{class:"mb-4",label:"Status"},{default:a(()=>[e(y,{modelValue:s.form.status,"onUpdate:modelValue":o[4]||(o[4]=t=>s.form.status=t),name:"status",class:"w-100",placeholder:"Pilih"},{default:a(()=>[e(p,{label:"Semua",value:""}),e(p,{label:"Pending",value:"draft"}),e(p,{label:"Selesai",value:"done"}),e(p,{label:"Batal",value:"cancel"})]),_:1},8,["modelValue"])]),_:1}),e(k,{class:"mb-4",label:"Periode"},{default:a(()=>[e(B,{name:"date",modelValue:s.form.periode,"onUpdate:modelValue":o[5]||(o[5]=t=>s.form.periode=t),type:"daterange","range-separator":"Sampai","start-placeholder":"Tanggal Mulai","end-placeholder":"Tanggal Selesai"},null,8,["modelValue"])]),_:1}),l("div",De,[l("div",Ce,[e(u,{onClick:o[6]||(o[6]=t=>s.showModal=!1)},{default:a(()=>[r("Batal")]),_:1}),e(u,{type:"primary","native-type":"submit"},{default:a(()=>[r(" Download ")]),_:1})])])]),_:1},8,["action"])]),_:1},8,["modelValue","before-close"])]),_:1})}const aa=L(le,[["render",Se]]);export{aa as default};
