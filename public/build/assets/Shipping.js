import k from"./ShippingAddress.js";import{_ as x,A as m,j as c,k as f,l as n,p as t,v as r,s as _,u as A,F as u,a0 as g,q as l,$ as C,E as j}from"./id.js";import{E,a as B}from"./index8.js";import"./index20.js";import"./index7.js";import"./typescript.js";import"./index26.js";import"./index27.js";import"./scroll.js";import"./event.js";import"./index21.js";import"./index22.js";import"./_Uint8Array.js";import"./_initCloneObject.js";import"./index28.js";const S={components:{ShippingAddress:k},props:{cart:Array,errors:Object},data(){return{product:[],var1:null,var2:null,selected:[],selectAll:!1,address:{},shippingCost:0,showAll:!0}},computed:{totalProduct(){var s=0;return this.selected.forEach((e,a)=>{s+=e.qty}),s},totalHarga(){var s=0;return this.cart.forEach((e,a)=>{s+=e.harga*e.qty}),s}},watch:{selectAll:function(s){this.selected=[],s&&this.$page.props.cart.forEach((e,a)=>{this.selected.push(e)})},address(s){if(Object.keys(s).length&&s.distance){let e=(s.distance-5e3)/1e3;this.shippingCost=e*6e3}}},mounted(){this.getAddress()},methods:{payment(){this.$inertia.form({lines:this.cart,address_id:this.address.id,shipping_cost:this.shippingCost,total:this.totalHarga}).post(this.route("checkout.store"),{preserveScroll:!0,onSuccess:()=>{}})},async getAddress(){try{this.isLoading=!0;const s=await axios.get("/user/alamat/data",{params:{main:1}});s.status==200&&(this.address=s.data),this.isLoading=!1}catch(s){console.error(s)}},async updatePayment(s,e){try{this.isLoading=!0,(await axios.post(this.route("user.order.state",{id:e}),{status:s})).status==200&&(window.location.href=this.route("user.order.show",{id:e})),this.isLoading=!1}catch(a){console.error(a)}}}},L={class:"content"},V=t("div",{class:"content-heading pt-0 mb-0 border-0 font-size-md"}," Pesanan Kamu ",-1),q={class:"block block-bordered rounded"},H={class:"block-content p-3"},T=["src"],N={class:"fs-5 fw-bold"},P={class:"fs-sm fw-semibold"},K={class:"fs-5 fw-bold text-end"},z=t("span",{class:"fs-6 fw-semibold"},"Tampilkan Semua",-1),F=t("i",{class:"fa fa-angle-small-down"},null,-1),O=t("span",{class:"fs-6 fw-semibold"},"Tampilkan Lebih Sedikit",-1),R=t("i",{class:"fa fa-angle-small-up"},null,-1),D=t("div",{class:"content-heading d-flex justify-content-between mb-2 py-2"}," Rincian Belanja ",-1),U={class:"block block-bordered rounded"},G={class:"block-content block-content-full"},I={class:"d-flex justify-content-between mb-3"},J={class:"fs-6"},M={class:"fs-6 fw-bold"},Q={class:"d-flex justify-content-between"},W=t("div",{class:"fs-6"},"Biaya Kirim",-1),X={class:"fs-6 fw-bold"},Y={class:"block-content p-4 border-top border-2x"},Z={class:"d-flex justify-content-between mb-3"},$=t("div",{class:"fs-5"},"Total Belanja",-1),ss={class:"fs-5 fw-bold"};function ts(s,e,a,es,i,p){const b=m("shipping-address"),d=E,h=B,y=j,v=m("base-layout");return c(),f(v,null,{default:n(()=>[t("div",L,[r(h,{gutter:20},{default:n(()=>[r(d,{lg:16},{default:n(()=>[r(b,{modelValue:i.address,"onUpdate:modelValue":e[0]||(e[0]=o=>i.address=o)},null,8,["modelValue"]),V,t("div",q,[t("div",H,[(c(!0),_(u,null,A(a.cart,(o,w)=>(c(),_(u,null,[w==0||!i.showAll?(c(),f(h,{key:o.variant_id,class:"mb-2",gutter:10},{default:n(()=>[r(d,{lg:2},{default:n(()=>[t("img",{src:o.product.main_image,class:"img-fluid"},null,8,T)]),_:2},1024),r(d,{lg:14,class:"my-auto"},{default:n(()=>[t("div",N,l(o.product.name),1),t("div",P,l(s.currency(o.harga))+" x "+l(o.qty)+" barang",1)]),_:2},1024),r(d,{lg:8,class:"my-auto"},{default:n(()=>[t("div",K,l(s.currency(o.harga*o.qty)),1)]),_:2},1024)]),_:2},1024)):g("",!0)],64))),256))]),a.cart.length>1?(c(),_("div",{key:0,class:"block-content p-3 text-center border-top border-bottom border-2",onClick:e[1]||(e[1]=o=>i.showAll=!i.showAll)},[i.showAll?(c(),_(u,{key:0},[z,F],64)):(c(),_(u,{key:1},[O,R],64))])):g("",!0)])]),_:1}),r(d,{lg:8},{default:n(()=>[D,t("div",U,[t("div",G,[t("div",I,[t("div",J,"Total Harga ("+l(a.cart.length)+" barang)",1),t("div",M,l(s.currency(p.totalHarga)),1)]),t("div",Q,[W,t("div",X,l(s.currency(i.shippingCost)),1)])]),t("div",Y,[t("div",Z,[$,t("div",ss,l(s.currency(p.totalHarga+i.shippingCost)),1)]),r(y,{type:"primary",size:"large",class:"w-100",onClick:p.payment},{default:n(()=>[C(" Lanjut Ke Pembayaran ")]),_:1},8,["onClick"])])])]),_:1})]),_:1})])]),_:1})}const bs=x(S,[["render",ts]]);export{bs as default};
