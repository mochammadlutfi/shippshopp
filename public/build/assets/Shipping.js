import w from"./ShippingAddress.js";import{_ as x,A as h,j as l,k as f,l as n,p as s,v as r,s as u,u as A,F as _,a0 as g,q as i,$ as j,E}from"./id.js";import{E as C,a as S}from"./index8.js";import"./index20.js";import"./index7.js";import"./typescript.js";import"./index26.js";import"./index27.js";import"./scroll.js";import"./event.js";import"./index21.js";import"./index22.js";import"./_Uint8Array.js";import"./_initCloneObject.js";import"./index28.js";const B={components:{ShippingAddress:w},props:{cart:Array,errors:Object},data(){return{product:[],var1:null,var2:null,selected:[],selectAll:!1,address:{},showAll:!0}},computed:{totalProduct(){var t=0;return this.selected.forEach((e,a)=>{t+=e.qty}),t},totalHarga(){var t=0;return this.cart.forEach((e,a)=>{t+=e.harga*e.qty}),t}},watch:{selectAll:function(t){this.selected=[],t&&this.$page.props.cart.forEach((e,a)=>{this.selected.push(e)})},address(t){if(Object.keys(t).length&&t.distance){let e=(t.distance-5e3)/1e3;this.shippingCost=e*6e3}}},mounted(){this.getAddress()},methods:{async payment(){this.$inertia.form({lines:this.cart,address_id:this.address.id,shipping_cost:0,total:this.totalHarga}).post(this.route("checkout.store"),{preserveScroll:!0,onSuccess:()=>{}})},async getAddress(){try{this.isLoading=!0;const t=await axios.get("/user/alamat/data",{params:{main:1}});t.status==200&&(this.address=t.data),this.isLoading=!1}catch(t){console.error(t)}},async updatePayment(t,e){try{this.isLoading=!0,(await axios.post(this.route("user.order.state",{id:e}),{status:t})).status==200&&(window.location.href=this.route("user.order.show",{id:e})),this.isLoading=!1}catch(a){console.error(a)}}}},L={class:"content"},V=s("div",{class:"content-heading pt-0 mb-0 border-0 font-size-md"}," Pesanan Kamu ",-1),q={class:"block block-bordered rounded"},H={class:"block-content p-3"},T=["src"],N={class:"fs-5 fw-bold"},P={class:"fs-sm fw-semibold"},z={class:"fs-5 fw-bold text-end"},F=s("span",{class:"fs-6 fw-semibold"},"Tampilkan Semua",-1),K=s("i",{class:"fa fa-angle-small-down"},null,-1),O=s("span",{class:"fs-6 fw-semibold"},"Tampilkan Lebih Sedikit",-1),R=s("i",{class:"fa fa-angle-small-up"},null,-1),D=s("div",{class:"content-heading d-flex justify-content-between mb-2 py-2"}," Rincian Belanja ",-1),U={class:"block block-bordered rounded"},G={class:"block-content block-content-full"},I={class:"d-flex justify-content-between mb-3"},J={class:"fs-6"},M={class:"fs-6 fw-bold"},Q={class:"block-content p-4 border-top border-2x"},W={class:"d-flex justify-content-between mb-3"},X=s("div",{class:"fs-5"},"Total Belanja",-1),Y={class:"fs-5 fw-bold"};function Z(t,e,a,$,c,m){const b=h("shipping-address"),d=C,p=S,y=E,k=h("base-layout");return l(),f(k,null,{default:n(()=>[s("div",L,[r(p,{gutter:20},{default:n(()=>[r(d,{lg:16},{default:n(()=>[r(b,{modelValue:c.address,"onUpdate:modelValue":e[0]||(e[0]=o=>c.address=o)},null,8,["modelValue"]),V,s("div",q,[s("div",H,[(l(!0),u(_,null,A(a.cart,(o,v)=>(l(),u(_,null,[v==0||!c.showAll?(l(),f(p,{key:o.variant_id,class:"mb-2",gutter:10},{default:n(()=>[r(d,{lg:2},{default:n(()=>[s("img",{src:o.product.main_image,class:"img-fluid"},null,8,T)]),_:2},1024),r(d,{lg:14,class:"my-auto"},{default:n(()=>[s("div",N,i(o.product.name),1),s("div",P,i(t.currency(o.harga))+" x "+i(o.qty)+" barang",1)]),_:2},1024),r(d,{lg:8,class:"my-auto"},{default:n(()=>[s("div",z,i(t.currency(o.harga*o.qty)),1)]),_:2},1024)]),_:2},1024)):g("",!0)],64))),256))]),a.cart.length>1?(l(),u("div",{key:0,class:"block-content p-3 text-center border-top border-bottom border-2",onClick:e[1]||(e[1]=o=>c.showAll=!c.showAll)},[c.showAll?(l(),u(_,{key:0},[F,K],64)):(l(),u(_,{key:1},[O,R],64))])):g("",!0)])]),_:1}),r(d,{lg:8},{default:n(()=>[D,s("div",U,[s("div",G,[s("div",I,[s("div",J,"Total Harga ("+i(a.cart.length)+" barang)",1),s("div",M,i(t.currency(m.totalHarga)),1)])]),s("div",Q,[s("div",W,[X,s("div",Y,i(t.currency(m.totalHarga)),1)]),r(y,{type:"primary",size:"large",class:"w-100",onClick:m.payment},{default:n(()=>[j(" Lanjut Ke Pembayaran ")]),_:1},8,["onClick"])])])]),_:1})]),_:1})])]),_:1})}const ht=x(B,[["render",Z]]);export{ht as default};
