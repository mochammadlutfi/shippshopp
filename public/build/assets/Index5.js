import{h as p}from"./moment.js";import{_ as g,A as v,j as y,k as b,l as n,p as s,H as r,v as i,q as c,E as k}from"./id.js";import{E as l}from"./index20.js";import{E as x}from"./index29.js";import{E as w}from"./index21.js";import{E as B,a as P}from"./index8.js";import"./index7.js";import"./typescript.js";import"./index27.js";import"./scroll.js";import"./event.js";const E={data(){return{status:this.route().params.status==null?"unpaid":this.route().params.status,data:[],isLoading:!1,page:1,pageSize:0,total:0,from:0,to:0,searchTerms:""}},async mounted(){await this.fetchData()},methods:{async fetchData(t){var t=t??1;try{this.isLoading=!0;const a=await axios.get(this.route("user.order.data"),{params:{page:t,search:this.searchTerms,status:this.status}});a.status==200&&(this.data=a.data.data,this.page=a.data.current_page,this.total=a.data.total,this.pageSize=a.data.per_page,this.from=a.data.from,this.to=a.data.to),this.isLoading=!1}catch(a){console.error(a)}},format_date(e){if(e)return p.locale("id"),p(String(e)).format("DD MMM YYYY")},payment(e){snap.pay(e.payment_ref,{onSuccess:function(t){this.updatePayment("paid",e.id),l({type:"success",message:"Pembayaran Berhasil"})},onPending:function(t){l({type:"info",message:"Menunggu Pembayaran"})},onError:function(t){l({type:"error",message:"Pembayaran Gagal"})},onClose:function(t){console.log(t)}})},async updatePayment(e,t){try{this.isLoading=!0,(await axios.post(this.route("user.order.state",{id:t}),{status:e})).status==200&&location.reload(),this.isLoading=!1}catch(a){console.error(a)}},receive(e){x.alert("Pastikan barang yang diterima sesuai dengan pesanan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Pesanan Sudah Diterima!",cancelButtonText:"Batal!",type:"warning"}).then(()=>{this.$inertia.post(this.route("user.order.confirm",{id:e}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),l({type:"success",message:"Pesanan Berhasil Diterima!"})}})})}}},D={class:"content"},S=s("div",{class:"d-flex justify-content-between align-items-center mb-4"},[s("h3",{class:"fs-4 fw-bold mb-0"},"Pesanan Saya")],-1),C={class:"block block-bordered rounded mb-3"},M={class:"nav nav-fill nav-tabs-capsule"},T={class:"nav-item"},z=["href"],L={class:"nav-item"},V=["href"],Y={class:"nav-item"},j=["href"],I={class:"nav-item"},N=["href"],q={class:"nav-item"},A=["href"],G={class:"nav-item"},H=["href"],R={class:"block-content p-2"},U=s("i",{class:"fa fa-search"},null,-1),F={class:"d-flex my-auto ms-auto"},J={class:"my-auto px-3"},K={class:"pt-25 pl-0"},O=s("i",{class:"fa fa-chevron-left fa-fw"},null,-1),Q=s("i",{class:"fa fa-chevron-right fa-fw"},null,-1);function W(e,t,a,X,o,Z){const h=w,u=B,d=k,m=P,f=v("base-layout");return y(),b(f,null,{default:n(()=>[s("div",D,[S,s("div",C,[s("ul",M,[s("li",T,[s("a",{class:r(["nav-link",{active:o.status=="unpaid"}]),href:e.route("user.order.index",{status:"unpaid"})},"Belum Bayar ",10,z)]),s("li",L,[s("a",{class:r(["nav-link",{active:o.status=="pending"}]),href:e.route("user.order.index",{status:"pending"})},"Pending ",10,V)]),s("li",Y,[s("a",{class:r(["nav-link",{active:o.status=="process"}]),href:e.route("user.order.index",{status:"process"})},"Dikemas ",10,j)]),s("li",I,[s("a",{class:r(["nav-link",{active:o.status=="shipped"}]),href:e.route("user.order.index",{status:"shipped"})},"Dikirim ",10,N)]),s("li",q,[s("a",{class:r(["nav-link",{active:o.status=="done"}]),href:e.route("user.order.index",{status:"done"})},"Selesai ",10,A)]),s("li",G,[s("a",{class:r(["nav-link",{active:o.status=="cancel"}]),href:e.route("user.order.index",{status:"cancel"})},"Dibatalkan ",10,H)])]),s("div",R,[i(m,{gutter:12},{default:n(()=>[i(u,{lg:12},{default:n(()=>[i(h,{modelValue:o.searchTerms,"onUpdate:modelValue":t[0]||(t[0]=_=>o.searchTerms=_),class:"w-75 m-2",placeholder:"Cari Pesanan"},{prefix:n(()=>[U]),_:1},8,["modelValue"])]),_:1}),i(u,{lg:12,class:"d-flex float-end my-auto"},{default:n(()=>[s("div",F,[s("div",J,[s("span",null,c(o.from)+"-"+c(o.to)+"/"+c(o.total),1)]),s("div",K,[i(d,{type:"primary",size:"small"},{default:n(()=>[O]),_:1}),i(d,{type:"primary",size:"small",plain:""},{default:n(()=>[Q]),_:1})])])]),_:1})]),_:1})])])])]),_:1})}const us=g(E,[["render",W]]);export{us as default};
