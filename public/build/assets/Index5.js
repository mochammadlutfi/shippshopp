import{h}from"./moment.js";import{_ as y,A as b,j as k,k as w,l as r,p as e,H as i,v as n,q as d,$ as E,E as x}from"./id.js";import{E as u}from"./index20.js";import{E as C}from"./index21.js";import{E as D,a as P}from"./index8.js";import{E as S,a as T}from"./index30.js";import"./index7.js";import"./typescript.js";import"./event.js";import"./index31.js";import"./_Uint8Array.js";import"./isEqual.js";import"./debounce.js";import"./index23.js";import"./_initCloneObject.js";const B={data(){return{status:this.route().params.status==null?"unpaid":this.route().params.status,data:[],isLoading:!1,page:1,pageSize:0,total:0,from:0,to:0,searchTerms:""}},async mounted(){await this.fetchData()},methods:{async fetchData(t){var t=t??1;try{this.isLoading=!0;const a=await axios.get(this.route("user.order.data"),{params:{page:t,search:this.searchTerms,status:this.status}});a.status==200&&(this.data=a.data.data,this.page=a.data.current_page,this.total=a.data.total,this.pageSize=a.data.per_page,this.from=a.data.from,this.to=a.data.to),this.isLoading=!1}catch(a){console.error(a)}},format_date(s){if(s)return h.locale("id"),h(String(s)).format("DD MMM YYYY")},payment(s){snap.pay(s.payment_ref,{onSuccess:function(t){this.updatePayment("paid",s.id),u({type:"success",message:"Pembayaran Berhasil"})},onPending:function(t){u({type:"info",message:"Menunggu Pembayaran"})},onError:function(t){u({type:"error",message:"Pembayaran Gagal"})},onClose:function(t){console.log(t)}})},async updatePayment(s,t){try{this.isLoading=!0,(await axios.post(this.route("user.order.state",{id:t}),{status:s})).status==200&&location.reload(),this.isLoading=!1}catch(a){console.error(a)}}}},V={class:"content"},z=e("div",{class:"d-flex justify-content-between align-items-center mb-4"},[e("h3",{class:"fs-4 fw-bold mb-0"},"Pesanan Saya")],-1),L={class:"block block-bordered rounded mb-3"},M={class:"nav nav-fill nav-tabs-capsule"},N={class:"nav-item"},Y=["href"],j={class:"nav-item"},A=["href"],I={class:"nav-item"},q=["href"],G={class:"nav-item"},H=["href"],R={class:"nav-item"},U=["href"],F={class:"nav-item"},J=["href"],K={class:"block-content p-2"},O=e("i",{class:"fa fa-search"},null,-1),Q={class:"d-flex my-auto ms-auto"},W={class:"my-auto px-3"},X={class:"pt-25 pl-0"},Z=e("i",{class:"fa fa-chevron-left fa-fw"},null,-1),$=e("i",{class:"fa fa-chevron-right fa-fw"},null,-1),ee=["href"];function se(s,t,a,te,o,ae){const f=C,p=D,m=x,_=P,c=S,g=T,v=b("base-layout");return k(),w(v,null,{default:r(()=>[e("div",V,[z,e("div",L,[e("ul",M,[e("li",N,[e("a",{class:i(["nav-link",{active:o.status=="unpaid"}]),href:s.route("user.order.index",{status:"unpaid"})},"Belum Bayar ",10,Y)]),e("li",j,[e("a",{class:i(["nav-link",{active:o.status=="pending"}]),href:s.route("user.order.index",{status:"pending"})},"Pending ",10,A)]),e("li",I,[e("a",{class:i(["nav-link",{active:o.status=="process"}]),href:s.route("user.order.index",{status:"process"})},"Dikemas ",10,q)]),e("li",G,[e("a",{class:i(["nav-link",{active:o.status=="shipped"}]),href:s.route("user.order.index",{status:"shipped"})},"Dikirim ",10,H)]),e("li",R,[e("a",{class:i(["nav-link",{active:o.status=="done"}]),href:s.route("user.order.index",{status:"done"})},"Selesai ",10,U)]),e("li",F,[e("a",{class:i(["nav-link",{active:o.status=="cancel"}]),href:s.route("user.order.index",{status:"cancel"})},"Dibatalkan ",10,J)])]),e("div",K,[n(_,{gutter:12},{default:r(()=>[n(p,{lg:12},{default:r(()=>[n(f,{modelValue:o.searchTerms,"onUpdate:modelValue":t[0]||(t[0]=l=>o.searchTerms=l),class:"w-75 m-2",placeholder:"Cari Pesanan"},{prefix:r(()=>[O]),_:1},8,["modelValue"])]),_:1}),n(p,{lg:12,class:"d-flex float-end my-auto"},{default:r(()=>[e("div",Q,[e("div",W,[e("span",null,d(o.from)+"-"+d(o.to)+"/"+d(o.total),1)]),e("div",X,[n(m,{type:"primary",size:"small"},{default:r(()=>[Z]),_:1}),n(m,{type:"primary",size:"small",plain:""},{default:r(()=>[$]),_:1})])])]),_:1})]),_:1})]),n(g,{data:o.data,class:"w-100",onSortChange:s.sortChange,"header-cell-class-name":"bg-dark text-white"},{default:r(()=>[n(c,{type:"index",width:"100"}),n(c,{prop:"nomor",label:"Nomor",sortable:""}),n(c,{prop:"total",label:"Total",sortable:""},{default:r(l=>[E(d(s.currency(l.row.total)),1)]),_:1}),n(c,{label:"Aksi",align:"center",width:"180"},{default:r(l=>[e("a",{href:s.route("user.order.show",{id:l.row.id}),class:"ep-button ep-button--primary"}," Detail ",8,ee)]),_:1})]),_:1},8,["data","onSortChange"])])])]),_:1})}const ye=y(B,[["render",se]]);export{ye as default};
