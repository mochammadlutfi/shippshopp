import U from"./UnitSelect.js";import{h as I}from"./moment.js";import{_ as L,A as N,j as u,k,l as t,p as l,v as e,$ as m,a3 as y,s as C,a2 as v,q as _,a0 as z,E as A,B as P,x as Y,y as O}from"./id.js";import{E}from"./index20.js";import{E as q}from"./index29.js";import{a as H,E as R}from"./index33.js";import{E as G,a as J}from"./index8.js";import{E as Q}from"./index21.js";import{E as W,a as X}from"./index30.js";import{E as Z}from"./index34.js";import{E as $,a as ee}from"./index22.js";import{E as te}from"./index26.js";import{v as oe}from"./directive.js";import"./index7.js";import"./typescript.js";import"./index27.js";import"./scroll.js";import"./index32.js";import"./isEqual.js";import"./_Uint8Array.js";import"./event.js";import"./debounce.js";import"./index31.js";import"./index23.js";import"./_initCloneObject.js";const ae={components:{UnitSelect:U},props:{errors:Object},data(){return{selected:[],data:[],from:0,to:0,isLoading:!0,page:1,pageSize:0,searchKey:"nama",searchKeyword:"",limit:25,total:0,showForm:!1,sort:"nama",sortDir:"ASC",formTitle:"Tambah Merk",form:{id:null,nama:null},editMode:!1,loadingForm:!1,loadingImport:!1,showImport:!1,importFile:null}},async created(){await this.fetchData()},methods:{indexMethod(s){return(this.page==1?1:this.limit*(this.page-1)+1)+s},sortChange(s){this.sort=s.prop,this.sortDir=s.order=="ascending"?"ASC":"DESC",this.fetchData()},async fetchData(a){var a=a??1;try{this.isLoading=!0;const i=await axios.get("/admin/merk/data",{params:{page:a,limit:this.limit,sort:this.sort,sortDir:this.sortDir,search:this.searchKeyword,searchKey:this.searchKey}});i.status==200&&(this.from=i.data.from,this.to=i.data.to,this.data=i.data.data,this.page=i.data.current_page,this.total=i.data.total,this.pageSize=i.data.per_page),this.isLoading=!1}catch(i){console.error(i)}},format_date(s){if(s)return I(String(s)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Kontak",this.editMode=!1,this.form.id=null,this.form.nama=null,this.form.phone=null,this.showForm=!1},submit(){this.loadingForm=!0;let s=this.$inertia.form(this.form),a=this.editMode==!0?this.route("admin.inventory.brand.update",{id:this.form.id}):this.route("admin.inventory.brand.store");s.post(a,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1},onSuccess:()=>{E({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm(),this.fetchData()}})},edit(s){this.formTitle="Ubah Merk",this.form.id=s.id,this.form.nama=s.nama,this.editMode=!0,this.showForm=!0},hapus(s){q.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.inventory.brand.delete",{id:s}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),E({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},se={class:"content"},le={class:"content-heading d-flex justify-content-between align-items-center"},ne=l("span",null,"Merk Produk",-1),ie={class:"space-x-1"},re=l("i",{class:"fa fa-plus me-1"},null,-1),me={class:"block rounded"},ce={class:"block-content py-3"},de=l("i",{class:"fa fa-search"},null,-1),pe={class:"block-content p-0"},ue=l("i",{class:"fa fa-angle-down ms-1"},null,-1),he=l("i",{class:"si fa-fw si-note"},null,-1),_e=l("i",{class:"si fa-fw si-trash"},null,-1),fe={key:0,class:"block-content py-2"},ge={class:"mb-0"},be={class:"text-end"},we=l("i",{class:"si si-close me-1"},null,-1),ke=l("i",{class:"si si-check me-1"},null,-1);function ye(s,a,i,Ce,o,r){const c=A,h=H,x=R,d=G,f=Q,g=J,p=W,b=P,D=Y,M=O,F=X,S=Z,V=$,B=ee,T=te,K=N("base-layout"),w=oe;return u(),k(K,null,{default:t(()=>[l("div",se,[l("div",le,[ne,l("div",ie,[e(c,{onClick:a[0]||(a[0]=n=>o.showForm=!0),type:"primary"},{default:t(()=>[re,m(" Tambah ")]),_:1})])]),y((u(),C("div",me,[l("div",ce,[e(g,{justify:"space-between"},{default:t(()=>[e(d,{span:12},{default:t(()=>[e(x,{modelValue:o.limit,"onUpdate:modelValue":a[1]||(a[1]=n=>o.limit=n),placeholder:"Pilih",style:{width:"115px"},onChange:a[2]||(a[2]=n=>r.fetchData(1))},{default:t(()=>[e(h,{label:"25",value:"25"}),e(h,{label:"50",value:"50"}),e(h,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(d,{span:8},{default:t(()=>[e(f,{modelValue:o.searchKeyword,"onUpdate:modelValue":a[3]||(a[3]=n=>o.searchKeyword=n),placeholder:"Masukan kata kunci",class:"input-with-select",clearable:""},{prefix:t(()=>[de]),_:1},8,["modelValue"])]),_:1})]),_:1})]),l("div",pe,[e(F,{data:o.data,class:"w-100",onSortChange:r.sortChange,"header-cell-class-name":"bg-primary text-dark"},{default:t(()=>[e(p,{type:"index",width:"100"}),e(p,{prop:"nama",label:"Nama",sortable:""}),e(p,{prop:"product_count",label:"Total Produk",sortable:""}),e(p,{label:"Aksi",align:"center",width:"180"},{default:t(n=>[e(M,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(D,null,{default:t(()=>[e(b,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:v(j=>r.edit(n.row),["prevent"])},{default:t(()=>[m(" Ubah "),he]),_:2},1032,["onClick"]),e(b,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:v(j=>r.hapus(n.row.id),["prevent"])},{default:t(()=>[m(" Hapus "),_e]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(c,{type:"primary"},{default:t(()=>[m(" Aksi "),ue]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])]),o.isLoading==!1?(u(),C("div",fe,[e(g,{justify:"space-between"},{default:t(()=>[e(d,{lg:12},{default:t(()=>[l("p",ge,"Menampilkan "+_(o.from)+" sampai "+_(o.to)+" dari "+_(o.total),1)]),_:1}),e(d,{lg:12,class:"text-end"},{default:t(()=>[e(S,{class:"float-end",background:"",layout:"prev, pager, next","page-size":o.pageSize,total:o.total,"current-page":o.page,onCurrentChange:r.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])):z("",!0)])),[[w,o.isLoading]])]),e(T,{modelValue:o.showForm,"onUpdate:modelValue":a[5]||(a[5]=n=>o.showForm=n),title:o.formTitle,width:"30%",class:"rounded-2","before-close":r.onCloseForm,"close-on-click-modal":!1},{default:t(()=>[y((u(),k(B,{model:o.form,"label-position":"top"},{default:t(()=>[e(V,{label:"Nama Merk",error:i.errors.nama},{default:t(()=>[e(f,{modelValue:o.form.nama,"onUpdate:modelValue":a[4]||(a[4]=n=>o.form.nama=n)},null,8,["modelValue"])]),_:1},8,["error"]),l("div",be,[e(c,{onClick:r.onCloseForm},{default:t(()=>[we,m(" Batal ")]),_:1},8,["onClick"]),e(c,{type:"primary",onClick:r.submit},{default:t(()=>[ke,m(" Simpan ")]),_:1},8,["onClick"])])]),_:1},8,["model"])),[[w,o.loadingForm]])]),_:1},8,["modelValue","title","before-close"])]),_:1})}const Je=L(ae,[["render",ye]]);export{Je as default};
