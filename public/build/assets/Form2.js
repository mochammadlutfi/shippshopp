import x from"./SelectOrder.js";import{_ as k,A as p,j as _,k as v,l as a,v as o,p as l,$ as m,q as d,s as q,F as C,a0 as B,a2 as F,E as S}from"./id.js";import{E as U}from"./index20.js";import{E as j,a as D}from"./index22.js";import{E as N,a as L}from"./index30.js";import{E as O}from"./index24.js";import{E as P}from"./index21.js";import"./index33.js";import"./index32.js";import"./isEqual.js";import"./_Uint8Array.js";import"./event.js";import"./scroll.js";import"./debounce.js";import"./index31.js";import"./index7.js";import"./typescript.js";import"./_initCloneObject.js";import"./index23.js";import"./index25.js";const I={components:{SelectOrder:x},props:{errors:{type:Object}},data(){return{form:{order_id:null},lines:[]}},setup(){},methods:{async fetchData(){try{this.isLoading=!0;const r=await axios.get(this.route("user.order.data"),{params:{id:this.form.order_id}});r.status==200&&(console.log(r.data),r.data.lines.forEach((t,n)=>{this.lines.push({id:null,line_id:t.id,product:t.product.name,variant:t.variant.name,variant_id:t.variant_id,product_id:t.product_id,qty_order:t.qty,qty:t.qty,reason:""})})),this.isLoading=!1}catch(r){console.error(r)}},removeLine(r,t){t&&this.lines_deleted.push(t),this.lines.splice(r,1),this.$forceUpdate()},submit(){this.loading=!0;let r=Object.assign(this.form,{lines:this.lines}),t=this.$inertia.form(r),n=this.route("user.return.store");t.post(n,{preserveScroll:!0,onSuccess:()=>{U({type:"success",message:"Data Berhasil Disimpan!"})},onFinish:()=>{this.loading=!1}})}}},T=l("div",{class:"d-flex justify-content-between align-items-center mb-4"},[l("h3",{class:"fs-4 fw-bold mb-0"},"Pengajuan Retur"),l("div",{class:"space-x-1"},[l("button",{class:"ep-button ep-button--primary"},[l("i",{class:"fa fa-check me-1"}),m(" Kirim ")])])],-1),A={class:"block rounded block-bordered"},M={class:"block-content p-3"},Q=l("i",{class:"fa fa-times"},null,-1);function R(r,t,n,$,u,c){const f=p("select-order"),h=j,s=N,b=O,y=P,w=S,g=L,E=D,V=p("user-layout");return _(),v(V,null,{default:a(()=>[o(E,{"label-width":"30%",onSubmit:F(c.submit,["prevent"]),"label-position":"top"},{default:a(()=>[T,l("div",A,[l("div",M,[o(h,{label:"Pilih Pesanan",error:n.errors.order_id},{default:a(()=>[o(f,{modelValue:u.form.order_id,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.order_id=e),onChange:c.fetchData},null,8,["modelValue","onChange"])]),_:1},8,["error"]),o(g,{data:u.lines,border:"",class:"mb-4",id:"variant"},{default:a(()=>[o(s,{label:"Produk"},{default:a(e=>[l("div",null,[m(d(e.row.product)+" ",1),e.row.product?(_(),q(C,{key:0},[m(" - "+d(e.row.variant),1)],64)):B("",!0)]),l("div",null,d(e.row.sku),1)]),_:1}),o(s,{label:"Qty Order",width:"90px"},{default:a(e=>[m(d(e.row.qty_order),1)]),_:1}),o(s,{label:"Qty Retur",width:"175px"},{default:a(e=>[o(b,{modelValue:e.row.qty,"onUpdate:modelValue":i=>e.row.qty=i,min:1,max:e.row.qty_order},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1}),o(s,{label:"Alasan"},{default:a(e=>[o(y,{modelValue:e.row.reason,"onUpdate:modelValue":i=>e.row.reason=i},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(s,{width:"60px",align:"center"},{default:a(e=>[o(w,{type:"danger",size:"small",onClick:i=>c.removeLine(e.$index,e.row.id)},{default:a(()=>[Q]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])]),_:1},8,["onSubmit"])]),_:1})}const ue=k(I,[["render",R]]);export{ue as default};
