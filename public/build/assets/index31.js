import{S as O,k as P}from"./_Uint8Array.js";import{b as E}from"./isEqual.js";import{Q as L,bY as g,bZ as C,bz as _,b_ as v,b$ as I,c0 as x,b1 as D,az as F,aN as w}from"./id.js";var H=1,T=2;function G(n,e,t,r){var s=t.length,o=s,u=!r;if(n==null)return!o;for(n=Object(n);s--;){var i=t[s];if(u&&i[2]?i[1]!==n[i[0]]:!(i[0]in n))return!1}for(;++s<o;){i=t[s];var a=i[0],c=n[a],l=i[1];if(u&&i[2]){if(c===void 0&&!(a in n))return!1}else{var d=new O;if(r)var p=r(c,l,a,n,e,d);if(!(p===void 0?E(l,c,H|T,r,d):p))return!1}}return!0}function R(n){return n===n&&!L(n)}function S(n){for(var e=P(n),t=e.length;t--;){var r=e[t],s=n[r];e[t]=[r,s,R(s)]}return e}function y(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function B(n){var e=S(n);return e.length==1&&e[0][2]?y(e[0][0],e[0][1]):function(t){return t===n||G(t,n,e)}}var N=1,U=2;function $(n,e){return g(n)&&R(e)?y(C(n),e):function(t){var r=_(t,n);return r===void 0&&r===e?v(t,n):E(e,r,N|U)}}function b(n){return function(e){return e==null?void 0:e[n]}}function K(n){return function(e){return I(e,n)}}function q(n){return g(n)?b(C(n)):K(n)}function k(n){return typeof n=="function"?n:n==null?x:typeof n=="object"?D(n)?$(n[0],n[1]):B(n):q(n)}const f=new Map;let m;F&&(document.addEventListener("mousedown",n=>m=n),document.addEventListener("mouseup",n=>{for(const e of f.values())for(const{documentHandler:t}of e)t(n,m)}));function A(n,e){let t=[];return Array.isArray(e.arg)?t=e.arg:w(e.arg)&&t.push(e.arg),function(r,s){const o=e.instance.popperRef,u=r.target,i=s==null?void 0:s.target,a=!e||!e.instance,c=!u||!i,l=n.contains(u)||n.contains(i),d=n===u,p=t.length&&t.some(h=>h==null?void 0:h.contains(u))||t.length&&t.includes(i),M=o&&(o.contains(u)||o.contains(i));a||c||l||d||p||M||e.value(r,s)}}const z={beforeMount(n,e){f.has(n)||f.set(n,[]),f.get(n).push({documentHandler:A(n,e),bindingFn:e.value})},updated(n,e){f.has(n)||f.set(n,[]);const t=f.get(n),r=t.findIndex(o=>o.bindingFn===e.oldValue),s={documentHandler:A(n,e),bindingFn:e.value};r>=0?t.splice(r,1,s):t.push(s)},unmounted(n){f.delete(n)}};export{z as C,k as b};
