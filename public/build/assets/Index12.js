import{_ as M,A as j,j as d,k as y,l as t,p as o,s as f,$ as c,a0 as g,a3 as K,v as e,q as p,a2 as T,E as L,B as z,x as N,y as Y}from"./id.js";import{E as P}from"./index29.js";import{E as A}from"./index20.js";import{a as H,E as I}from"./index33.js";import{E as U,a as q}from"./index8.js";import{E as J}from"./index21.js";import{E as O,a as R}from"./index30.js";import{E as F}from"./index34.js";import{v as G}from"./directive.js";import"./index27.js";import"./scroll.js";import"./index7.js";import"./typescript.js";import"./index32.js";import"./isEqual.js";import"./_Uint8Array.js";import"./event.js";import"./debounce.js";import"./index31.js";import"./index23.js";import"./_initCloneObject.js";const Q={data(){return{data:[],isLoading:!0,searchKey:"name",searchKeyword:"",limit:25,total:0,page:1,pageSize:0}},async created(){await this.fetchData()},methods:{doSearch:_.throttle(function(){this.fetchData()},200),async fetchData(s){var s=s??1;try{this.isLoading=!0;const r=await axios.get("/admin/produk/data",{params:{page:s,limit:this.limit,search:this.searchKeyword,searchKey:this.searchKey}});r.status==200&&(this.data=r.data.data,this.page=r.data.current_page,this.total=r.data.total,this.pageSize=r.data.per_page),this.isLoading=!1}catch(r){console.error(r)}},format_date(a){if(a)return moment(String(a)).format("DD MMM YYYY")},hapus(a){P.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.inventory.product.delete",{id:a}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),A({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},W={class:"content"},X={class:"content-heading d-flex justify-content-between align-items-center"},Z=o("span",null,"Produk",-1),$={class:"space-x-1"},ee=["href"],te=o("i",{class:"fa fa-plus me-1"},null,-1),ae={class:"block rounded bordered"},oe={class:"block-content py-3"},se=o("i",{class:"fa fa-search"},null,-1),ne={class:"block-content p-0"},le=o("i",{class:"fa fa-angle-down ms-1"},null,-1),re=["href"],ie=o("i",{class:"si fa-fw si-note"},null,-1),ce=o("i",{class:"si fa-fw si-trash"},null,-1),de={key:0,class:"block-content py-2"},pe={class:"mb-0"};function ue(a,s,r,_e,n,u){const h=H,k=I,m=U,v=J,b=q,i=O,E=L,w=z,C=N,D=Y,x=R,S=F,B=j("base-layout"),V=G;return d(),y(B,null,{default:t(()=>[o("div",W,[o("div",X,[Z,o("div",$,[a.$page.props.user.level!="kasir 2"?(d(),f("a",{key:0,href:a.route("admin.inventory.product.create"),class:"ep-button ep-button--primary"},[te,c(" Tambah ")],8,ee)):g("",!0)])]),K((d(),f("div",ae,[o("div",oe,[e(b,{justify:"space-between"},{default:t(()=>[e(m,{span:12},{default:t(()=>[e(k,{modelValue:n.limit,"onUpdate:modelValue":s[0]||(s[0]=l=>n.limit=l),placeholder:"Pilih",style:{width:"115px"},onChange:s[1]||(s[1]=l=>u.fetchData(1))},{default:t(()=>[e(h,{label:"25",value:"25"}),e(h,{label:"50",value:"50"}),e(h,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(m,{span:8},{default:t(()=>[e(v,{modelValue:n.searchKeyword,"onUpdate:modelValue":s[2]||(s[2]=l=>n.searchKeyword=l),placeholder:"Masukan kata kunci",class:"input-with-select",clearable:"",onChange:u.doSearch},{prefix:t(()=>[se]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1})]),o("div",ne,[e(x,{data:n.data,class:"w-100",onSortChange:a.sortChange,"header-cell-class-name":"bg-primary text-dark"},{default:t(()=>[e(i,{prop:"nama",width:"350",label:"Nama",sortable:""}),e(i,{prop:"category.nama",label:"Kategori",sortable:""}),e(i,{prop:"harga_jual",label:"Harga Jual",sortable:""},{default:t(l=>[c(p(a.currency(l.row.harga_jual)),1)]),_:1}),e(i,{prop:"harga_beli",label:"Harga Beli",sortable:""},{default:t(l=>[c(p(a.currency(l.row.harga_beli)),1)]),_:1}),e(i,{prop:"stok",label:"Stok",width:"100",sortable:""}),a.$page.props.user.level!="kasir 2"?(d(),y(i,{key:0,label:"Aksi",align:"center",width:"180"},{default:t(l=>[e(D,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(C,null,{default:t(()=>[e(w,null,{default:t(()=>[o("a",{href:a.route("admin.inventory.product.edit",{id:l.row.id}),class:"w-100 d-flex align-items-center justify-content-between space-x-1"},[c(" Ubah "),ie],8,re)]),_:2},1024),e(w,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:T(me=>u.hapus(l.row.id),["prevent"])},{default:t(()=>[c(" Hapus "),ce]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(E,{type:"primary"},{default:t(()=>[c(" Aksi "),le]),_:1})]),_:2},1024)]),_:1})):g("",!0)]),_:1},8,["data","onSortChange"])]),n.isLoading==!1?(d(),f("div",de,[e(b,{justify:"space-between"},{default:t(()=>[e(m,{lg:12},{default:t(()=>[o("p",pe,"Menampilkan "+p(a.from)+" sampai "+p(a.to)+" dari "+p(n.total),1)]),_:1}),e(m,{lg:12,class:"text-end"},{default:t(()=>[e(S,{class:"float-end",background:"",layout:"prev, pager, next","page-size":n.pageSize,total:n.total,"current-page":n.page,onCurrentChange:u.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])):g("",!0)])),[[V,n.isLoading]])])]),_:1})}const Ne=M(Q,[["render",ue]]);export{Ne as default};
