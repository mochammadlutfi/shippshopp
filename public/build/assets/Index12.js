import{_ as V,A as M,j as p,k as w,l as t,p as o,s as h,$ as c,a0 as f,a3 as j,v as e,q as d,a2 as K,E as T,B as L,x as z,y as N}from"./id.js";import{E as Y}from"./index29.js";import{E as P}from"./index20.js";import{a as A,E as H}from"./index33.js";import{E as I,a as U}from"./index8.js";import{E as q}from"./index21.js";import{E as J,a as O}from"./index30.js";import{E as R}from"./index34.js";import{v as F}from"./directive.js";import"./index27.js";import"./scroll.js";import"./index7.js";import"./typescript.js";import"./index32.js";import"./isEqual.js";import"./_Uint8Array.js";import"./event.js";import"./debounce.js";import"./index31.js";import"./index23.js";import"./_initCloneObject.js";const G={data(){return{data:[],isLoading:!0,searchKey:"name",searchKeyword:"",limit:25,total:0,page:1,pageSize:0}},async created(){await this.fetchData()},methods:{async fetchData(s){var s=s??1;try{this.isLoading=!0;const r=await axios.get("/admin/produk/data",{params:{page:s,limit:this.limit,search:this.searchKeyword,searchKey:this.searchKey}});r.status==200&&(this.data=r.data.data,this.page=r.data.current_page,this.total=r.data.total,this.pageSize=r.data.per_page),this.isLoading=!1}catch(r){console.error(r)}},format_date(a){if(a)return moment(String(a)).format("DD MMM YYYY")},hapus(a){Y.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.inventory.product.delete",{id:a}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),P({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},Q={class:"content"},W={class:"content-heading d-flex justify-content-between align-items-center"},X=o("span",null,"Produk",-1),Z={class:"space-x-1"},$=["href"],ee=o("i",{class:"fa fa-plus me-1"},null,-1),te={class:"block rounded bordered"},ae={class:"block-content py-3"},oe=o("i",{class:"fa fa-search"},null,-1),se={class:"block-content p-0"},ne=o("i",{class:"fa fa-angle-down ms-1"},null,-1),le=["href"],re=o("i",{class:"si fa-fw si-note"},null,-1),ie=o("i",{class:"si fa-fw si-trash"},null,-1),ce={key:0,class:"block-content py-2"},pe={class:"mb-0"};function de(a,s,r,ue,n,m){const _=A,y=H,u=I,k=q,g=U,i=J,v=T,b=L,E=z,C=N,D=O,x=R,B=M("base-layout"),S=F;return p(),w(B,null,{default:t(()=>[o("div",Q,[o("div",W,[X,o("div",Z,[a.$page.props.user.level!="kasir 2"?(p(),h("a",{key:0,href:a.route("admin.inventory.product.create"),class:"ep-button ep-button--primary"},[ee,c(" Tambah ")],8,$)):f("",!0)])]),j((p(),h("div",te,[o("div",ae,[e(g,{justify:"space-between"},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(y,{modelValue:n.limit,"onUpdate:modelValue":s[0]||(s[0]=l=>n.limit=l),placeholder:"Pilih",style:{width:"115px"},onChange:s[1]||(s[1]=l=>m.fetchData(1))},{default:t(()=>[e(_,{label:"25",value:"25"}),e(_,{label:"50",value:"50"}),e(_,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(u,{span:8},{default:t(()=>[e(k,{modelValue:n.searchKeyword,"onUpdate:modelValue":s[2]||(s[2]=l=>n.searchKeyword=l),placeholder:"Masukan kata kunci",class:"input-with-select",clearable:""},{prefix:t(()=>[oe]),_:1},8,["modelValue"])]),_:1})]),_:1})]),o("div",se,[e(D,{data:n.data,class:"w-100",onSortChange:a.sortChange,"header-cell-class-name":"bg-primary text-dark"},{default:t(()=>[e(i,{prop:"nama",width:"350",label:"Nama",sortable:""}),e(i,{prop:"category.nama",label:"Kategori",sortable:""}),e(i,{prop:"harga_jual",label:"Harga Jual",sortable:""},{default:t(l=>[c(d(a.currency(l.row.harga_jual)),1)]),_:1}),e(i,{prop:"harga_beli",label:"Harga Beli",sortable:""},{default:t(l=>[c(d(a.currency(l.row.harga_beli)),1)]),_:1}),e(i,{prop:"stok",label:"Stok",width:"100",sortable:""}),a.$page.props.user.level!="kasir 2"?(p(),w(i,{key:0,label:"Aksi",align:"center",width:"180"},{default:t(l=>[e(C,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(E,null,{default:t(()=>[e(b,null,{default:t(()=>[o("a",{href:a.route("admin.inventory.product.edit",{id:l.row.id}),class:"w-100 d-flex align-items-center justify-content-between space-x-1"},[c(" Ubah "),re],8,le)]),_:2},1024),e(b,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:K(me=>m.hapus(l.row.id),["prevent"])},{default:t(()=>[c(" Hapus "),ie]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(v,{type:"primary"},{default:t(()=>[c(" Aksi "),ne]),_:1})]),_:2},1024)]),_:1})):f("",!0)]),_:1},8,["data","onSortChange"])]),n.isLoading==!1?(p(),h("div",ce,[e(g,{justify:"space-between"},{default:t(()=>[e(u,{lg:12},{default:t(()=>[o("p",pe,"Menampilkan "+d(a.from)+" sampai "+d(a.to)+" dari "+d(n.total),1)]),_:1}),e(u,{lg:12,class:"text-end"},{default:t(()=>[e(x,{class:"float-end",background:"",layout:"prev, pager, next","page-size":n.pageSize,total:n.total,"current-page":n.page,onCurrentChange:m.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])):f("",!0)])),[[S,n.isLoading]])])]),_:1})}const ze=V(G,[["render",de]]);export{ze as default};
