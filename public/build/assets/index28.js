import{b4 as y,aK as f,c1 as G,c2 as h,an as K,bC as U,b9 as W,ax as A,b as V,b8 as j,T as D,f as $,az as g,c3 as N,w as q,c4 as J,c5 as Q,o as Z,c6 as P,aV as b,a9 as F,at as Y,R as ee,v as oe,G as x,O as te}from"./id.js";import{g as ne}from"./scroll.js";var m=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(m||{});const le=e=>{if(!f(e))return{};const s=e.props||{},t=(f(e.type)?e.type.props:void 0)||{},o={};return Object.keys(t).forEach(n=>{G(t[n],"default")&&(o[n]=t[n].default)}),Object.keys(s).forEach(n=>{o[h(n)]=s[n]}),o},S=e=>{const s=y(e)?e:[e],t=[];return s.forEach(o=>{var n;y(o)?t.push(...S(o)):f(o)&&y(o.children)?t.push(...S(o.children)):(t.push(o),f(o)&&((n=o.component)!=null&&n.subTree)&&t.push(...S(o.component.subTree)))}),t},me=(e,s,t,o)=>{let n={offsetX:0,offsetY:0};const a=c=>{const v=c.clientX,E=c.clientY,{offsetX:p,offsetY:T}=n,i=e.value.getBoundingClientRect(),M=i.left,L=i.top,_=i.width,k=i.height,H=document.documentElement.clientWidth,B=document.documentElement.clientHeight,I=-M+p,R=-L+T,X=H-M-_+p,z=B-L-k+T,C=O=>{let d=p+O.clientX-v,l=T+O.clientY-E;o!=null&&o.value||(d=Math.min(Math.max(d,I),X),l=Math.min(Math.max(l,R),z)),n={offsetX:d,offsetY:l},e.value&&(e.value.style.transform=`translate(${A(d)}, ${A(l)})`)},w=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",w)},u=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",a)},r=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",a)};K(()=>{U(()=>{t.value?u():r()})}),W(()=>{r()})},fe=(e,s={})=>{V(e)||j("[useLockscreen]","You need to pass a ref param to this function");const t=s.ns||D("popup"),o=$(()=>t.bm("parent","hidden"));if(!g||N(document.body,o.value))return;let n=0,a=!1,u="0";const r=()=>{setTimeout(()=>{P(document==null?void 0:document.body,o.value),a&&document&&(document.body.style.width=u)},200)};q(e,c=>{if(!c){r();return}a=!N(document.body,o.value),a&&(u=document.body.style.width),n=ne(t.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,E=J(document.body,"overflowY");n>0&&(v||E==="scroll")&&a&&(document.body.style.width=`calc(100% - ${n}px)`),Q(document.body,o.value)}),Z(()=>r())},se=e=>{if(!e)return{onClick:b,onMousedown:b,onMouseup:b};let s=!1,t=!1;return{onClick:u=>{s&&t&&e(u),s=t=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{t=u.target===u.currentTarget}}},ue=F({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Y([String,Array,Object])},zIndex:{type:Y([String,Number])}}),ae={click:e=>e instanceof MouseEvent},re="overlay";var ce=ee({name:"ElOverlay",props:ue,emits:ae,setup(e,{slots:s,emit:t}){const o=D(re),n=c=>{t("click",c)},{onClick:a,onMousedown:u,onMouseup:r}=se(e.customMaskEvent?void 0:n);return()=>e.mask?oe("div",{class:[o.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:u,onMouseup:r},[x(s,"default")],m.STYLE|m.CLASS|m.PROPS,["onClick","onMouseup","onMousedown"]):te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(s,"default")])}});const ve=ce;export{ve as E,fe as a,se as b,S as f,le as g,me as u};
